{% extends 'base.html' %}

{% block title %}Painel de Controle{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <div class="col-12 text-center mb-4">
            <h1 class="display-4">Painel de Controle</h1>
            <p class="text-muted">Data de hoje: {{ today_date }}</p>
        </div>
    </div>

    <div class="row text-center">
        <!-- Sales Summary -->
        <div class="col-md-4 mb-3">
            <div class="card border-primary">
                <div class="card-header bg-primary text-white">
                    <h5>Total de Vendas</h5>
                </div>
                <div class="card-body">
                    <h2 class="text-primary">R$ {{ sales_total_value|floatformat:2 }}</h2>
                </div>
            </div>
        </div>

        <!-- Number of Sales -->
        <div class="col-md-4 mb-3">
            <div class="card border-success">
                <div class="card-header bg-success text-white">
                    <h5>Número de Vendas Hoje</h5>
                </div>
                <div class="card-body">
                    <h2 class="text-success">{{ num_sales_today }}</h2>
                </div>
            </div>
        </div>

        <!-- Items Sold -->
        <div class="col-md-4 mb-3">
            <div class="card border-info">
                <div class="card-header bg-info text-white">
                    <h5>Itens Vendidos Hoje</h5>
                </div>
                <div class="card-body">
                    <h2 class="text-info">{{ num_items_sold_today }}</h2>
                </div>
            </div>
        </div>
    </div>

    <div class="row text-center">
        <!-- Returns Summary -->
        <div class="col-md-6 mb-3">
            <div class="card border-danger">
                <div class="card-header bg-danger text-white">
                    <h5>Valor de Devoluções</h5>
                </div>
                <div class="card-body">
                    <h2 class="text-danger">R$ {{ returns_total_value|floatformat:2 }}</h2>
                </div>
            </div>
        </div>

        <!-- Profit Today -->
        <div class="col-md-6 mb-3">
            <div class="card border-warning">
                <div class="card-header bg-warning text-white">
                    <h5>Lucro Hoje</h5>
                </div>
                <div class="card-body">
                    <h2 class="text-warning">R$ {{ profit_today|floatformat:2 }}</h2>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Top Selling Product -->
        <div class="col-12 mb-3">
            <div class="card border-dark">
                <div class="card-header bg-dark text-white">
                    <h5>Produto Mais Vendido</h5>
                </div>
                <div class="card-body">
                    {% if top_selling_product %}
                        <h4>{{ top_selling_product.product__name }}</h4>
                        <p>Quantidade: {{ top_selling_product.total_quantity }}</p>
                    {% else %}
                        <p class="text-muted">Sem dados de vendas disponíveis para hoje</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <div class="row text-center">
        <!-- Stock Summary -->
        <div class="col-md-6 mb-3">
            <div class="card border-secondary">
                <div class="card-header bg-secondary text-white">
                    <h5>Valor Total do Estoque</h5>
                </div>
                <div class="card-body">
                    <h2 class="text-secondary">R$ {{ total_stock_value|floatformat:2 }}</h2>
                </div>
            </div>
        </div>

        <!-- Stock Profit -->
        <div class="col-md-6 mb-3">
            <div class="card border-secondary">
                <div class="card-header bg-secondary text-white">
                    <h5>Lucro Total do Estoque</h5>
                </div>
                <div class="card-body">
                    <h2 class="text-secondary">R$ {{ total_stock_profit }}</h2>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
